<html>

<head>
    <title>ClusterWS Manual tests</title>

    <script src="./scripts/ClusterWS.js"></script>
</head>

<body>
    <div class="header">
        <h1 class="heading">ClusterWS Manual Tests </h1>
    </div>

    <script>
        function RunSocket() {
            console.time('Connect');
            let socket = new ClusterWS({
                url: 'localhost',
                port: 80
            })

            socket.on('connect', () => {
                console.timeEnd('Connect')

                setInterval(() => {
                    socket.send('test', new Date().getTime())
                }, 2000)

                socket.on('test', (time) => {
                    console.log('Time: ', new Date(time).getSeconds() + ':' + new Date(time).getMilliseconds(), new Date().getSeconds() + ':' + new Date().getMilliseconds())
                })
            })

            socket.on('disconnect', () => {
                console.log('disconnected')
            })
        }

        setTimeout(RunSocket(), 2000)
    </script>
</body>

</html>